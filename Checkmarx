pipeline {
    agent any

    stages {
        stage('Fetch Project') {
            steps {
                echo 'Fetching Project'
                //checkout([$class: 'GitSCM', branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/akhandpratapsingh/ProjectWithTestCasesRename']]])
            }
        }
        stage('Scan Checkmarx') {
            steps {
                echo 'Scan Checkmarx'
                //checkmarxASTScanner additionalOptions: '', baseAuthUrl: '', branchName: 'main', checkmarxInstallation: 'CheckmarxCloud', credentialsId: '', projectName: 'JenkinsPipleineCxOne', serverUrl: '', tenantName: ''
                // snDevOpsSecurityResult securityResultAttributes: '{"scanner": "Checkmarx SAST", "projectId": "1076","securityToolId": "766ea99b87cdf150c67da8673cbb3560"}'
               // snDevOpsSecurityResult securityResultAttributes: "{'scanner': 'Checkmarx One', 'projectName': 'DemoProject', 'projectId': '75acb348-c054-4ab3-807d-e17e92a923ab', 'scanId': '2bb9e016-3669-488c-8341-ffa4831221f3', 'securityToolId': 'a7e5b430c3adb550946e706dc0013101'}"
                // scanner: Scanning tool and is required e.g. Checkmarx One.
                // projectName/projectId: Name/Id of your Checkmarx One project and is required. This attribute is applicable only for Checkmarx One.
                // scanId: Checkmarx One scan id and is optional. This attribute is applicable only for Checkmarx One.
                // securityToolId: Security tool onboarded in ServiceNow (sys_id of the onboarded security tool) and is optional.
                snDevOpsSecurityResult securityResultAttributes: "{'scanner': 'Checkmarx SAST', 'projectId': '1076', 'securityToolId': '49d6f3a7c3e1f110a653f92f050131ff'}"
                // scanner: Scanning tool and is required e.g. Checkmarx SAST.
                // projectId: Id of your Checkmarx SAST project and is required. This attribute is applicable only for Checkmarx SAST.
                // securityToolId: Security tool onboarded in ServiceNow (sys_id of the onboarded security tool) and is optional.               
                // snDevOpsChange() 
    snDevOpsChange(changeRequestDetails: '''
    {
      "attributes": {
        "requested_by": {
          "name": "Test User"
        }, // requested_by with name.
        // You can specify the requested_by attribute with sys_id as well. Example: "requested_by": "62826bf03710200044e0bfc8bcbe5df1" 
        "assignment_group": {
          "name": "Change Approval Team"
        }, // assignment_group with name.
        // You can specify the assignment_group attribute with sys_id as well. Example: "assignment_group": "5f721d93c0a8010e015533746de18bf9"
        "priority": "2",
        "comments": "This is a sample pipeline script to be added in your change step",
        "work_notes": "Update this to work_notes",
        "start_date": "2022-01-05 11:59:59", // This is the planned start date.
        "end_date": "2022-01-08 11:59:59" // This is the planned end date.
      }
    }''')
               
     
            }
        }
    }
}
